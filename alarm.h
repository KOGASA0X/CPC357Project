#pragma once

#include <Arduino.h>
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"

#define ARRAY_LEN(array) (sizeof(array) / sizeof(array[0]))
#define A3 220
#define C4 262
#define E4 330
#define A4 440
#define C5 523
#define E5 659
#define B3 247
#define D4 294
#define G4 392
#define B4 494
#define D5 587
#define G5 784
#define A5 880
#define Fb5 740
#define D6 1175
#define Fb6 1480
#define E6 1319
#define G6 1568
#define B5 988
#define Gb5 831
#define Gb4 415
#define Cb5 554
#define Fb4 370
#define F5 698
#define Cb6 1109
#define Cb4 277
#define Gb3 208
#define Fb3 185
#define C6 1047
#define A6 1760

namespace alarmPlay{
  const int midi1[592][3] = {
  {A3, 169, 10},
  {C4, 169, 10},
  {E4, 169, 10},
  {A4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {B3, 169, 10},
  {D4, 169, 10},
  {G4, 169, 10},
  {B4, 169, 10},
  {D5, 169, 10},
  {G5, 169, 10},
  {C4, 169, 10},
  {E4, 169, 10},
  {A4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {A5, 169, 10},
  {D5, 169, 10},
  {E5, 169, 10},
  {G5, 84, 5},
  {E5, 84, 5},
  {C5, 169, 10},
  {B4, 169, 10},
  {G4, 169, 10},
  {A3, 169, 10},
  {C4, 169, 10},
  {E4, 169, 10},
  {A4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {B3, 169, 10},
  {D4, 169, 10},
  {G4, 169, 10},
  {B4, 169, 10},
  {D5, 169, 10},
  {G5, 169, 10},
  {C4, 169, 10},
  {E4, 169, 10},
  {A4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {A5, 169, 10},
  {D5, 169, 10},
  {E5, 169, 10},
  {G5, 84, 5},
  {E5, 84, 5},
  {C5, 169, 10},
  {B4, 169, 10},
  {G4, 169, 10},
  {A4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {A4, 169, 10},
  {E5, 169, 10},
  {A4, 84, 5},
  {C5, 84, 5},
  {B4, 169, 10},
  {B4, 169, 10},
  {E5, 169, 10},
  {B4, 169, 10},
  {E5, 169, 10},
  {B4, 169, 10},
  {C5, 169, 10},
  {A4, 169, 10},
  {E5, 169, 10},
  {A4, 169, 10},
  {E5, 169, 10},
  {A4, 84, 5},
  {C5, 84, 5},
  {D5, 169, 10},
  {E5, 169, 10},
  {G5, 169, 10},
  {D5, 56, 4},
  {E5, 56, 4},
  {D5, 56, 4},
  {B4, 169, 10},
  {G4, 169, 10},
  {A4, 169, 10},
  {C4, 169, 10},
  {E5, 169, 10},
  {A4, 169, 10},
  {E5, 169, 10},
  {E5, 169, 10},
  {B4, 169, 10},
  {D4, 169, 10},
  {E5, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {A5, 169, 10},
  {Fb5, 169, 10},
  {A4, 169, 10},
  {D5, 169, 10},
  {Fb5, 169, 10},
  {A5, 169, 10},
  {D6, 169, 10},
  {Fb6, 1017, 54},
  {E5, 339, 19},
  {A4, 169, 10},
  {B4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {D5, 339, 19},
  {G4, 339, 19},
  {D5, 339, 19},
  {C5, 339, 19},
  {B4, 169, 10},
  {C5, 169, 10},
  {B4, 169, 10},
  {G4, 169, 10},
  {E4, 339, 19},
  {A4, 339, 19},
  {A4, 339, 19},
  {E5, 339, 19},
  {A4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {G5, 169, 10},
  {Fb5, 339, 19},
  {D5, 339, 19},
  {D5, 169, 10},
  {E5, 169, 10},
  {C5, 169, 10},
  {B4, 169, 10},
  {G4, 339, 19},
  {B4, 339, 19},
  {A4, 1017, 54},
  {E5, 339, 19},
  {A4, 169, 10},
  {B4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {D5, 339, 19},
  {G4, 339, 19},
  {D5, 339, 19},
  {C5, 339, 19},
  {B4, 169, 10},
  {C5, 169, 10},
  {B4, 169, 10},
  {G4, 169, 10},
  {E4, 339, 19},
  {A4, 339, 19},
  {A4, 339, 19},
  {E5, 339, 19},
  {A4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {G5, 169, 10},
  {Fb5, 339, 19},
  {D5, 339, 19},
  {D5, 169, 10},
  {E5, 169, 10},
  {C5, 169, 10},
  {B4, 169, 10},
  {G4, 339, 19},
  {B4, 339, 19},
  {A4, 1017, 54},
  {A4, 339, 19},
  {E5, 678, 36},
  {D5, 169, 10},
  {E5, 169, 10},
  {G5, 169, 10},
  {D5, 56, 4},
  {E5, 56, 4},
  {D5, 56, 4},
  {B4, 169, 10},
  {G4, 169, 10},
  {A4, 339, 19},
  {E5, 678, 36},
  {A5, 339, 19},
  {E6, 678, 36},
  {A5, 339, 19},
  {E6, 678, 36},
  {D6, 169, 10},
  {E6, 169, 10},
  {G6, 169, 10},
  {D6, 56, 4},
  {E6, 56, 4},
  {D6, 56, 4},
  {B5, 169, 10},
  {G5, 169, 10},
  {A5, 2035, 108},
  {A4, 339, 19},
  {E5, 678, 36},
  {D5, 169, 10},
  {E5, 169, 10},
  {G5, 169, 10},
  {D5, 56, 4},
  {E5, 56, 4},
  {D5, 56, 4},
  {B4, 169, 10},
  {G4, 169, 10},
  {A4, 339, 19},
  {E5, 678, 36},
  {A5, 339, 19},
  {E6, 678, 36},
  {A5, 339, 19},
  {E6, 678, 36},
  {D6, 169, 10},
  {E6, 169, 10},
  {G6, 169, 10},
  {D6, 56, 4},
  {E6, 56, 4},
  {D6, 56, 4},
  {B5, 169, 10},
  {G5, 169, 10},
  {Gb5, 1017, 54},
  {B4, 339, 19},
  {A4, 339, 19},
  {Gb4, 339, 19},
  {A4, 508, 28},
  {A4, 84, 5},
  {B4, 84, 5},
  {Cb5, 254, 14},
  {B4, 254, 14},
  {Cb5, 169, 10},
  {Cb5, 508, 28},
  {Cb5, 84, 5},
  {Fb5, 84, 5},
  {Gb5, 169, 10},
  {A5, 169, 10},
  {Gb5, 56, 4},
  {A5, 56, 4},
  {Gb5, 56, 4},
  {E5, 169, 10},
  {Fb5, 254, 14},
  {Gb5, 254, 14},
  {A5, 169, 10},
  {Gb5, 254, 14},
  {E5, 254, 14},
  {D5, 169, 10},
  {Cb5, 508, 28},
  {Fb5, 169, 10},
  {Fb5, 678, 36},
  {D5, 678, 36},
  {D5, 254, 14},
  {E5, 254, 14},
  {D5, 169, 10},
  {Cb5, 254, 14},
  {B4, 254, 14},
  {A4, 169, 10},
  {A4, 254, 14},
  {Gb4, 254, 14},
  {Fb4, 169, 10},
  {Gb4, 254, 14},
  {A4, 254, 14},
  {B4, 169, 10},
  {Cb5, 84, 5},
  {B4, 84, 5},
  {Cb5, 84, 5},
  {D5, 84, 5},
  {E5, 84, 5},
  {D5, 84, 5},
  {E5, 84, 5},
  {Fb5, 84, 5},
  {F5, 169, 10},
  {Gb4, 169, 10},
  {Fb5, 169, 10},
  {Gb4, 169, 10},
  {Gb5, 169, 10},
  {Gb4, 169, 10},
  {B5, 339, 19},
  {A5, 508, 28},
  {A5, 84, 5},
  {B5, 84, 5},
  {Cb6, 169, 10},
  {B5, 56, 4},
  {Cb6, 56, 4},
  {B5, 225, 13},
  {A5, 169, 10},
  {Gb5, 508, 28},
  {Gb5, 84, 5},
  {A5, 84, 5},
  {B5, 169, 10},
  {A5, 169, 10},
  {Gb5, 56, 4},
  {A5, 56, 4},
  {Gb5, 56, 4},
  {E5, 169, 10},
  {Fb5, 254, 14},
  {Gb5, 254, 14},
  {A5, 169, 10},
  {Gb5, 254, 14},
  {E5, 254, 14},
  {D5, 169, 10},
  {Cb5, 508, 28},
  {Fb5, 169, 10},
  {Fb5, 678, 36},
  {D5, 678, 36},
  {D5, 254, 14},
  {E5, 254, 14},
  {D5, 169, 10},
  {Cb5, 254, 14},
  {B4, 254, 14},
  {A4, 169, 10},
  {A4, 254, 14},
  {Gb4, 254, 14},
  {Fb4, 169, 10},
  {Gb4, 254, 14},
  {A4, 254, 14},
  {B4, 169, 10},
  {Cb5, 84, 5},
  {B4, 84, 5},
  {Cb5, 84, 5},
  {D5, 84, 5},
  {E5, 84, 5},
  {D5, 84, 5},
  {E5, 84, 5},
  {Fb5, 84, 5},
  {F5, 169, 10},
  {Gb4, 84, 5},
  {Cb5, 84, 5},
  {Fb5, 169, 10},
  {Gb4, 84, 5},
  {Cb5, 84, 5},
  {Gb5, 169, 10},
  {Gb4, 84, 5},
  {Cb5, 84, 5},
  {B5, 339, 19},
  {A3, 169, 10},
  {Cb4, 169, 10},
  {Fb4, 169, 10},
  {A4, 169, 10},
  {Gb3, 169, 10},
  {B3, 169, 10},
  {E4, 169, 10},
  {Gb4, 169, 10},
  {B4, 169, 10},
  {A3, 169, 10},
  {Cb4, 169, 10},
  {Fb4, 169, 10},
  {A4, 169, 10},
  {B4, 169, 10},
  {A4, 169, 10},
  {Gb4, 169, 10},
  {E4, 169, 10},
  {Fb3, 169, 10},
  {A3, 169, 10},
  {Cb4, 169, 10},
  {Fb4, 169, 10},
  {A4, 169, 10},
  {Cb5, 169, 10},
  {Gb3, 169, 10},
  {B3, 169, 10},
  {E4, 169, 10},
  {Gb4, 169, 10},
  {B4, 169, 10},
  {E5, 169, 10},
  {A3, 169, 10},
  {Cb4, 169, 10},
  {Fb4, 169, 10},
  {A4, 169, 10},
  {Cb5, 169, 10},
  {Fb5, 169, 10},
  {B4, 169, 10},
  {Cb5, 169, 10},
  {E5, 84, 5},
  {Cb5, 84, 5},
  {A4, 169, 10},
  {Gb4, 169, 10},
  {E4, 169, 10},
  {A4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {A4, 169, 10},
  {E5, 169, 10},
  {A4, 84, 5},
  {C5, 84, 5},
  {B4, 169, 10},
  {B4, 169, 10},
  {E5, 169, 10},
  {B4, 169, 10},
  {E5, 169, 10},
  {B4, 169, 10},
  {C5, 169, 10},
  {A4, 169, 10},
  {E5, 169, 10},
  {A4, 169, 10},
  {E5, 169, 10},
  {A4, 84, 5},
  {C5, 84, 5},
  {D5, 169, 10},
  {E5, 169, 10},
  {G5, 169, 10},
  {D5, 56, 4},
  {E5, 56, 4},
  {D5, 56, 4},
  {B4, 169, 10},
  {G4, 169, 10},
  {A4, 169, 10},
  {C5, 169, 10},
  {E5, 169, 10},
  {A5, 169, 10},
  {C6, 169, 10},
  {E6, 169, 10},
  {B4, 169, 10},
  {D5, 169, 10},
  {G5, 169, 10},
  {B5, 169, 10},
  {D6, 169, 10},
  {A6, 169, 10},
  {Fb5, 169, 10},
  {A4, 169, 10},
  {D5, 169, 10},
  {Fb5, 169, 10},
  {A5, 169, 10},
  {D6, 169, 10},
  {Fb6, 339, 19},
  {D6, 169, 10},
  {Fb6, 169, 10},
  {D5, 169, 10},
  {Fb5, 169, 10},
  {D6, 2136, 0},
  };
  // using https://github.com/ShivamJoker/MIDI-to-Arduino

  extern TaskHandle_t alarmTaskHandle;

  void playAlarmTask(void *parameter);
  void playMidi(int pin, const int notes[][3], size_t len);
  void playAlarm(int buzzerPin);

  void setupAlarm(int pin);
  void startAlarm();
  void stopAlarm();
  bool isAlarmRunning();
}